文本编辑器Vi常用命令总结  
多年来的Linux运维经验中，很大一部分是在使用Vi编辑器修改各种配置文件。这里简要总结下经常使用的操作，希望能够对大家有所帮助。

如无特殊说明，使用这些命令时，请先按下键盘上的ESC键，确保Vi从编辑模式转入命令模式。

##编辑文件时如何退出Vi？

:wq! 强制保存当前编辑的文件，然后退出（通常是文件正在被另一用户编辑时）  
:wq 常规保存并退出（用得最多）  
:x 作用与:wq一样  
ZZ 作用与:wq一样（请注意Z是大写的，并且不是在命令模式)   
:q 退出（如果文件已经被修改，系统会提示） 
:q!不保存强制退出  

##不使用箭头键移动光标

h 在当前行向左移动一个字符   
j 移动到下一行 
k 移动到上一行  
l 在当前行向右移动一个字符   
Ctrl+f 向前滚动一页 
Ctrl+b 向后滚动一页  
:n 将光标定位到第n行  
:$ 将光标定位到最后一行  
0 将光标定位到本行的行首  
$ 将光标定位到本行的行尾  
G 将光标定位到本文章的最后一行，与: $功能相同。  
H 将光标定位到屏幕的顶端  
M 将光标定位到屏幕的中间  
L 将光标定位到屏幕的底端  

##查找与替换功能

/ 后面跟要查找的东西，在文件中向前搜索  
? 后面跟要查找的东西，在文件中向后搜索  
n 向前重复搜索  
N 向后重复搜索  
*:s/regexp/replacement 将当前行出现的第一个regexp替换为replacement  
:s/regexp/replacement/g 将当前行中所有regexp替换为replacement  
:%s/regexp/replacement/g 将文件中所有regexp替换为replacement  
:n,ms/regexp/replacement/g 第n行开始至第m行中的regexp替换为replacement  

##复制和粘贴

yy 复制光标当前行  
nyy 复制光标当前行到当前行以下的n-1行  
:1,100 co 200 将1~100的内容复制到第200行。  
:100,102 co $ 将100~102行的内容复制到最后一行。   
p 粘贴到当前行的下一行 
P(大写) 粘贴到当前行的上一行  

##剪切和删除

dd 删除当前行  
ndd 与nyy相似   
dw 删除一个单词  
ndw 与ndd相似  
x 删除一个字符  
nx 删除n个字符  
dG 删除当前光标到文件末尾  
d0 删除当前光标到本行行首  
d$ 删除当前光标到本行行尾  
:1,100d 删除1~100  
:100d 删除第100行  
:1,100 mo $ 将1~100行的内容移动到最后一行。  

##几种编辑模式

i 在当前位置的字符前面进入插入模式  
I 在当前行的开头进行插入  
a 在当前位置的字符后面进入插入模式  
A 在当前行的结尾进行插入  
o 在当前行下面打开一个新行进行插入  
O 在当前行上面打开一个新行进行插入  

##撤消和重做操作 (Undo/Redo)

u 撤销上一次的更改  
Ctrl+R 如果不小心按错了u撤消操作，可以使用此命令更正  
:redo 功能与Ctrl+R相同  
. 重复上一命令的  