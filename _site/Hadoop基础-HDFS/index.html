<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8"><![endif]--><!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9"><![endif]--><!--[if gt IE 8]><!--><html class="no-js">
<!--<![endif]--> <head> <meta charset="UTF-8"> <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <title>蹲马步 – Break</title> <meta name="description" content="For Playing, Finding and Thinking."> <meta name="keywords" content="Blocks, Namenodes, Datanedes, CMD, Java interface, Data Flow, Distcp－并行拷贝"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="http://breakdimbo.github.io/assets/img/logo.png"> <meta name="twitter:title" content="蹲马步"> <meta name="twitter:description" content="关于Hadoop的一些基础知识。"> <meta name="twitter:site" content="@woojack1"> <meta name="twitter:creator" content="@woojack1"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="蹲马步"> <meta property="og:description" content="关于Hadoop的一些基础知识。"> <meta property="og:url" content="http://breakdimbo.github.io/Hadoop%E5%9F%BA%E7%A1%80-HDFS/"> <meta property="og:site_name" content="Break"> <meta property="og:image" content="http://breakdimbo.github.io/assets/img/logo.png"> <link rel="canonical" href="http://breakdimbo.github.io/Hadoop%E5%9F%BA%E7%A1%80-HDFS/"> <link href="http://breakdimbo.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Break Feed"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- CSS --> <link rel="stylesheet" href="http://breakdimbo.github.io/assets/css/main.css"> <!-- JS --> <script src="http://breakdimbo.github.io/assets/js/modernizr-3.3.1.custom.min.js"></script> <!-- Favicons --> <link rel="apple-touch-icon" href="http://breakdimbo.github.io/assets/img/favicons/apple-icon-precomposed.png"> <link rel="apple-touch-icon" sizes="72x72" href="http://breakdimbo.github.io/assets/img/favicons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="114x114" href="http://breakdimbo.github.io/assets/img/favicons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="144x144" href="http://breakdimbo.github.io/assets/img/favicons/apple-icon-144x144.png"> <link rel="shortcut icon" type="image/png" href="http://breakdimbo.github.io/favicon.png"> <link rel="shortcut icon" href="http://breakdimbo.github.io/favicon.ico"> <!-- Background Image --> <style type="text/css">body {background-image:url(http://breakdimbo.github.io/assets/img/placeholder-big.jpg); background-repeat: no-repeat; background-size: cover; }</style> <!-- Post Feature Image --> </head> <body> <nav id="dl-menu" class="dl-menuwrapper" role="navigation"> <button class="dl-trigger">Open Menu</button> <ul class="dl-menu"> <li><a href="http://breakdimbo.github.io/">Home</a></li> <li> <a href="#">About</a> <ul class="dl-submenu"> <li> <img src="http://breakdimbo.github.io/assets/img/logo2.png" alt="Break photo" class="author-photo"> <h4>Break</h4> <p>For Playing, Finding and Thinking.</p> </li> <li><a href="http://breakdimbo.github.io/about/"><span class="btn btn-inverse">Learn More</span></a></li> <li> <a href="http://twitter.com/woojack1" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a> </li> <li> <a href="http://instagram.com/space_boycow" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-instagram"></i> Instagram</a> </li> <li> <a href="http://github.com/breaddimbo" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-github"></i> Github</a> </li> <li> <a href="http://steamcommunity.com/id/breakdimbo" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-steam-square"></i> Steam</a> </li> <li> <a href="http://www.weibo.com/579955794" target="_blank" rel="noopener noreferrer"><i class="fa fa-fw fa-weibo"></i> Weibo</a> </li> </ul>
<!-- /.dl-submenu --> </li> <li> <a href="#">Posts</a> <ul class="dl-submenu"> <li><a href="http://breakdimbo.github.io/posts/">All Posts</a></li> <li><a href="http://breakdimbo.github.io/tags/">All Tags</a></li> </ul> </li> <li><a href="http://breakdimbo.github.io/blog/">Blog</a></li> <li><a href="http://breakdimbo.github.io/linux/">Linux</a></li> <li><a href="http://breakdimbo.github.io/java/">Java</a></li> <li><a href="http://breakdimbo.github.io/bigData/">Big Data</a></li> </ul>
<!-- /.dl-menu --> </nav><!-- /.dl-menuwrapper --> <!-- Header --> <header class="header" role="banner"> <div class="wrapper animated fadeIn"> <div class="content"> <div class="post-title "> <h1>蹲马步</h1> <h4>19 May 2016</h4> <p class="reading-time"> <i class="fa fa-clock-o"></i> Reading time ~1 minute </p>
<!-- /.entry-reading-time --> <a class="btn zoombtn" href="http://breakdimbo.github.io/posts/"> <i class="fa fa-chevron-left"></i> </a> </div> <h1 id="hadoop">Hadoop——分布式文件系统</h1> <h2 id="section">喔！小百科</h2> <p>什么是分布式文件系统？</p> <blockquote> <p>Filesystems that manage the storage <strong>across a network of machines</strong> are called distributed filesystems</p> </blockquote> <p>什么是HDFS？</p> <blockquote> <p>HDFS is a filesystem designed for storing <strong>very large</strong> files with <strong>streaming data access patterns</strong> (write-once, read-many-times), running on clusters of <strong>commodity hardware</strong>.</p> </blockquote> <h2 id="hdfs">些微进入HDFS</h2> <h3 id="section-1">区块</h3> <p>HDFS也有区块的概念，文件也是按<em>独立</em>区块存储的。但是非常大，默认是128M。那么，为何这个区块如此之大?<br> <em>为了最小化寻址时间。</em></p> <blockquote> <p>If the block is large enough, the time it takes to transfer the data from the disk can be significantly longer than the time to seek to the start of the block.</p> </blockquote> <h3 id="namenodes--datanodes">Namenodes &amp; Datanodes</h3> <p>HDFS集群以Master-Worker的工作模式运行。分别对应了Namenodes和Datanodes。</p> <ul> <li>Namenodes（大脑）: 管理文件系统的<em>名域</em>（namespace）。<em>名域</em>里面存储了这个文件系统的文件结构以及全部文件和目录的元数据。因此namenode可以定位一个给定文件的所有区块所在的datanodoes。<em>名域</em>信息以两种形式永久的保存在本地硬盘上： <ol> <li>namespace image</li> <li>edit log</li> </ol> </li> </ul> <p><strong>但是，注意！</strong></p> <blockquote> <p>however, it does not store block locations persistently, because this information is reconstructed from datanodes when the system starts.</p> </blockquote> <ul> <li>Datanodes（身体）: 脏活累活全它干！它们负责存储和取回区块内的信息。并且它们定期向namenodes汇报它们存储的区块信息（以list of blocks的形式）。</li> </ul> <h3 id="hdfs-">HDFS 「联邦」</h3> <p>Hadoop 2.x支持添加多个namenodes，分别负责文件系统的一部分（<em>各部分相互独立</em>），从而增加Datanodes的数量（数据存储量），并防止数据全部丢失。</p> <h2 id="shell">一些常用Shell命令</h2> <p>首先，注意以下两个命令的区别：</p> <ul> <li>hadoop fs - 可用于本地和HDFS上的文件</li> <li>hdfs dfs - 只可用于操作hdfs上的文件</li> </ul> <p>以下是一些命令：<br> 从本地向HDFS拷贝文件</p> <div class="highlighter-rouge"><pre class="highlight"><code>% hadoop fs -copyFromLocal input/docs/quangle.txt  
\ hdfs://localhost/user/tom/quangle.txt
</code></pre></div> <p>创建目录，列出HDFS根目录下文件：</p> <div class="highlighter-rouge"><pre class="highlight"><code>% hadoop fs -mkdir books
% hadoop fs -ls .
</code></pre></div> <h2 id="hadoop-">Hadoop 文件系统</h2> <figure> <a href="http://breakdimbo.github.io/images/Hadoop-Filesystem.png"><img src="http://breakdimbo.github.io/images/Hadoop-Filesystem.png"></a> </figure> <div class="entry-meta"> <br> <hr> <span class="entry-tags"><a href="http://breakdimbo.github.io/tags/#Blocks" title="Pages tagged Blocks" class="tag"><span class="term">Blocks</span></a><a href="http://breakdimbo.github.io/tags/#Namenodes" title="Pages tagged Namenodes" class="tag"><span class="term">Namenodes</span></a><a href="http://breakdimbo.github.io/tags/#Datanedes" title="Pages tagged Datanedes" class="tag"><span class="term">Datanedes</span></a><a href="http://breakdimbo.github.io/tags/#CMD" title="Pages tagged CMD" class="tag"><span class="term">CMD</span></a><a href="http://breakdimbo.github.io/tags/#Java%20interface" title="Pages tagged Java interface" class="tag"><span class="term">Java interface</span></a><a href="http://breakdimbo.github.io/tags/#Data%20Flow" title="Pages tagged Data Flow" class="tag"><span class="term">Data Flow</span></a><a href="http://breakdimbo.github.io/tags/#Distcp%EF%BC%8D%E5%B9%B6%E8%A1%8C%E6%8B%B7%E8%B4%9D" title="Pages tagged Distcp－并行拷贝" class="tag"><span class="term">Distcp－并行拷贝</span></a></span> <span class="social-share"> <a href="https://www.facebook.com/sharer/sharer.php?u=http://breakdimbo.github.io/Hadoop%E5%9F%BA%E7%A1%80-HDFS/" title="Share on Facebook" class="tag"> <span class="term"><i class="fa fa-facebook-square"></i> Like</span> </a> <a href="https://twitter.com/intent/tweet?text=http://breakdimbo.github.io/Hadoop%E5%9F%BA%E7%A1%80-HDFS/" title="Share on Twitter" class="tag"> <span class="term"><i class="fa fa-twitter-square"></i> Tweet</span> </a> <a href="https://plus.google.com/share?url=http://breakdimbo.github.io/Hadoop%E5%9F%BA%E7%A1%80-HDFS/" title="Share on Google+" class="tag"> <span class="term"><i class="fa fa-google-plus-square"></i> +1</span> </a> </span> <div style="clear:both"></div> </div> </div> </div> <section id="disqus_thread" class="animated fadeInUp"></section><!-- /#disqus_thread --> </header> <!-- JS --> <script src="http://breakdimbo.github.io/assets/js/jquery-1.12.0.min.js"></script> <script src="http://breakdimbo.github.io/assets/js/jquery.dlmenu.min.js"></script> <script src="http://breakdimbo.github.io/assets/js/jquery.goup.min.js"></script> <script src="http://breakdimbo.github.io/assets/js/jquery.magnific-popup.min.js"></script> <script src="http://breakdimbo.github.io/assets/js/jquery.fitvid.min.js"></script> <script src="http://breakdimbo.github.io/assets/js/scripts.js"></script> <script type="text/javascript"> var disqus_shortname = 'breakd'; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); (function () { var s = document.createElement('script'); s.async = true; s.type = 'text/javascript'; s.src = '//' + disqus_shortname + '.disqus.com/count.js'; (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s); }()); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript> <!-- MathJax --> <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>
